{"version":3,"sources":["shift-plan/constants.js","shift-plan/employeeModel.js","shift-plan/shiftPlan.js","shift-plan/monthModel.js","components/employee/employee.jsx","components/year-month/year-month.jsx","components/plan-day-off-table/date-row.jsx","components/plan-day-off-table/day-row.jsx","components/plan-day-off-table/plan-day-off-table.jsx","components/plan-day-off-table/auto-plan-day-off-table.jsx","components/app/app.jsx","serviceWorker.js","index.jsx"],"names":["Day","1","2","3","4","5","6","0","7","Role","MG","FT","PT","ShiftType","MoringShift","NightShift","NightShiftOvertime","FullDay","DayOff","MaxShiftSeq","EmployeeModel","uniqueId","index","name","role","maxShiftSeq","Object","assign","this","shiftSeq","shifts","shiftTypeCount","values","forEach","shiftTypeVal","Number","MAX_VALUE","dates","planDayOffDates","date","maxSeqShift","indexOf","shiftType","push","ShiftPlan","monthModel","origDayOffTable","autoDayOffTable","_isNextWeekDayOffCountGreaterThan2","row","firstDateOfThisWeek","slice","filter","shift","length","rows","cols","lastMonthLastWeekDays","_preAddDayOff","_planAllDayOff","dayOffTable","beginDateOfWeekOfMonth","beginDay","endDateOfMonth","days","nextMonthFirstWeekDays","beginDateOfWeek","_preAddDayOffForWeek","rowIndex","count","day","_dateToColIndex","_setTableCellShift","planJobQueue","firstDateOfThisMonth","endOfPlanDate","firstDateOfWeek","ftRowsNeedToPlan","_isThisWeekDayOffCountGreaterEqualThan2","_populatePlanJobQueue","_processPlanJob","pop","ptRowsNeedToPlan","find","rowsNeedToPlan","_getThisWeekDayOffCount","unshift","planJob","_planRowDayOff","weekShifts","_getThisWeekShifts","dayOffCount","_signTheOtherDayOffThisWeekWhenThisWeekIsSignOneDayOffAlready","lastWeekLastDayOffDate","_getLastWeekLastDayOffDate","candidateDates","secCandidateDates","getDay","dayOffDate","_getLeastDayOffCountDate","thisWeekDayOffDate","beforeSeq","nextWeekFirstDayOff","_getNextWeekFirstDayOffDate","afterSeq","thisWeakDayOffDay","undefined","lastWeekLastDayOffDay","console","assert","reverse","colIndex","minCount","result","Math","floor","random","MonthModel","year","month","holidayOffDates","dateObj","Date","getDate","lastMonthDays","getNextMonthFirstWeekDays","getLastMonthLastWeekDays","isWeekend","Employee","props","employeeModels","roleOptions","handleAddEmployeeBtnClick","handleEmployeeChange","handleDeleteEmployeeBtnClick","roleSelectOptions","map","key","empList","emp","className","value","data-unique-id","onChange","type","onClick","PureComponent","YearMonth","yearOptions","selectedYear","selectedMonth","handleYearSelectChange","handleMonthSelectChange","yearSelectOptions","monthSelectOptions","React","DateRow","monthData","dateHeaders","DayRow","dayHeaders","PlanDayOffTable","dayOffTableCellClick","rowLength","thisMonthText","toLocaleString","thisMonth","setMonth","getMonth","lastMonthText","bodyRows","clickableCells","col","colSpan","AutoPlanDayOffTable","shiftCells","countRow","getTime","App","initialDayOffTable","shouldShiftTypeAppend","getDayOffTableCols","Array","from","fill","daysCols","keys","addEmpToDayOffTable","employeeModel","newDayOffTable","editEmpToDayOffTable","empIndex","deleteEmpToDayOffTable","e","target","setState","state","employeeIndexCounter","newEmp","dataset","newEmployeeModels","editEmpIndex","findIndex","deleteEmpIndex","handleGoToStep3Click","getAutoDayOffTable","nextMonth","thisYear","getFullYear","employeeProps","id","href","Component","Boolean","window","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.607ae918.chunk.js","sourcesContent":["const Day = {\r\n  1: '一',\r\n  2: '二',\r\n  3: '三',\r\n  4: '四',\r\n  5: '五',\r\n  6: '六',\r\n  0: '日',\r\n  7: '日',\r\n};\r\n\r\nconst Role = {\r\n  MG: '店',\r\n  FT: '正',\r\n  PT: '兼',\r\n};\r\n\r\nconst ShiftType = {\r\n  MoringShift: '1',\r\n  NightShift: '2',\r\n  NightShiftOvertime: '2+',\r\n  FullDay: '全',\r\n  DayOff: 'X',\r\n};\r\n\r\nconst MaxShiftSeq = 4;\r\n\r\nexport {\r\n  Day, Role, ShiftType, MaxShiftSeq,\r\n};\r\n","import { ShiftType, Role, MaxShiftSeq } from './constants';\r\n\r\nexport default class EmployeeModel {\r\n  constructor({\r\n    uniqueId, index, name, role, maxShiftSeq = MaxShiftSeq,\r\n  }) {\r\n    Object.assign(this, {\r\n      uniqueId, index, name, role, maxShiftSeq,\r\n    });\r\n    this.shiftSeq = 0;\r\n    this.shifts = [];\r\n    this.shiftTypeCount = {};\r\n    Object.values(ShiftType).forEach((shiftTypeVal) => {\r\n      this.shiftTypeCount[shiftTypeVal] = 0;\r\n    });\r\n\r\n    if (role === Role.MG) {\r\n      this.shiftTypeCount[ShiftType.FullDay] = Number.MAX_VALUE;\r\n      this.shiftTypeCount[ShiftType.NightShiftOvertime] = Number.MAX_VALUE;\r\n    }\r\n  }\r\n\r\n  setPlanDayOffDates(dates) {\r\n    this.planDayOffDates = dates;\r\n  }\r\n\r\n  isCandidate(date) {\r\n    if (this.shiftSeq >= this.maxSeqShift || this.planDayOffDates.indexOf(date) !== -1) return false;\r\n    return true;\r\n  }\r\n\r\n  setShift(date, shiftType) {\r\n    if (shiftType === ShiftType.DayOff) this.shiftSeq = 0;\r\n    else this.shiftSeq += 1;\r\n\r\n    this.shifts.push(shiftType);\r\n    this.shiftTypeCount[shiftType] += 1;\r\n  }\r\n}\r\n","/* eslint-disable no-param-reassign */\r\nimport {\r\n  Day, ShiftType, Role, MaxShiftSeq,\r\n} from './constants';\r\n\r\nexport default class ShiftPlan {\r\n  constructor(monthModel, origDayOffTable, autoDayOffTable) {\r\n    Object.assign(this, { monthModel, origDayOffTable, autoDayOffTable });\r\n    this.rows = autoDayOffTable.length;\r\n    this.cols = autoDayOffTable[0].length;\r\n  }\r\n\r\n  _dateToColIndex(date) {\r\n    return date + this.monthModel.lastMonthLastWeekDays;\r\n  }\r\n\r\n  getAutoDayOffTable() {\r\n    this._preAddDayOff(this.autoDayOffTable, this.monthModel);\r\n    this._planAllDayOff(this.autoDayOffTable, this.monthModel);\r\n    return this.autoDayOffTable;\r\n  }\r\n\r\n  _preAddDayOff(dayOffTable, monthModel) {\r\n    const beginDateOfWeekOfMonth = monthModel.beginDay === 1 ? 1 : 1 + (7 - monthModel.beginDay + 1);\r\n    const endDateOfMonth = monthModel.days + monthModel.nextMonthFirstWeekDays;\r\n    for (let beginDateOfWeek = beginDateOfWeekOfMonth; beginDateOfWeek <= endDateOfMonth; beginDateOfWeek += 7) {\r\n      this._preAddDayOffForWeek(dayOffTable, monthModel, beginDateOfWeek);\r\n    }\r\n  }\r\n\r\n  _preAddDayOffForWeek(dayOffTable, monthModel, beginDateOfWeek) {\r\n    for (let rowIndex = 0; rowIndex < dayOffTable.length - 1; rowIndex += 1) {\r\n      let count = 0;\r\n      for (let day = 0; day < 3; day += 1) {\r\n        if (dayOffTable[rowIndex][this._dateToColIndex(beginDateOfWeek + day)] === ShiftType.DayOff) count += 1;\r\n      }\r\n      if (count >= 2\r\n        && beginDateOfWeek + 7 <= 1 + monthModel.lastMonthLastWeekDays\r\n        + monthModel.days + monthModel.nextMonthFirstWeekDays) {\r\n        this._setTableCellShift(dayOffTable, rowIndex, beginDateOfWeek + 7, ShiftType.DayOff);\r\n      }\r\n      count = 0;\r\n      for (let day = 4; day < 7; day += 1) {\r\n        if (dayOffTable[rowIndex][this._dateToColIndex(beginDateOfWeek + day)] === ShiftType.DayOff) count += 1;\r\n      }\r\n      if (count >= 2 && beginDateOfWeek - 1 > 0) {\r\n        this._setTableCellShift(dayOffTable, rowIndex, beginDateOfWeek - 1, ShiftType.DayOff);\r\n      }\r\n    }\r\n  }\r\n\r\n  _planAllDayOff(dayOffTable, monthModel) {\r\n    const planJobQueue = [];\r\n    const firstDateOfThisMonth = monthModel.beginDay === 1 ? 1 : 1 + (7 - monthModel.beginDay + 1);\r\n    const endOfPlanDate = monthModel.days + monthModel.nextMonthFirstWeekDays;\r\n    for (let firstDateOfWeek = firstDateOfThisMonth; firstDateOfWeek <= endOfPlanDate; firstDateOfWeek += 7) {\r\n      const ftRowsNeedToPlan = dayOffTable\r\n        .filter((row) => row[row.length - 1] === Role.FT\r\n          && !this._isThisWeekDayOffCountGreaterEqualThan2(row, firstDateOfWeek));\r\n\r\n      this._populatePlanJobQueue(planJobQueue, firstDateOfWeek, ftRowsNeedToPlan);\r\n\r\n      while (planJobQueue.length !== 0) {\r\n        this._processPlanJob(dayOffTable, monthModel, planJobQueue.pop());\r\n      }\r\n\r\n      const ptRowsNeedToPlan = dayOffTable\r\n        .filter((row) => row[row.length - 1] === Role.PT\r\n          && !this._isThisWeekDayOffCountGreaterEqualThan2(row, firstDateOfWeek));\r\n\r\n      this._populatePlanJobQueue(planJobQueue, firstDateOfWeek, ptRowsNeedToPlan);\r\n\r\n      while (planJobQueue.length !== 0) {\r\n        this._processPlanJob(dayOffTable, monthModel, planJobQueue.pop());\r\n      }\r\n\r\n      this._preAddDayOffForWeek(dayOffTable, monthModel, firstDateOfWeek);\r\n\r\n      this._processPlanJob(\r\n        dayOffTable, monthModel,\r\n        {\r\n          row: dayOffTable.find((row) => row[row.length - 1] === Role.MG),\r\n          firstDateOfThisWeek: firstDateOfWeek,\r\n        },\r\n      );\r\n    }\r\n  }\r\n\r\n  _populatePlanJobQueue(planJobQueue, firstDateOfThisWeek, rowsNeedToPlan) {\r\n    rowsNeedToPlan\r\n      .filter((row) => this._isNextWeekDayOffCountGreaterThan2(row, firstDateOfThisWeek)\r\n        && this._getThisWeekDayOffCount(row, firstDateOfThisWeek) === 1).forEach((row) => {\r\n          planJobQueue.unshift({ row, firstDateOfThisWeek });\r\n        });\r\n    rowsNeedToPlan\r\n      .filter((row) => this._isNextWeekDayOffCountGreaterThan2(row, firstDateOfThisWeek)\r\n        && this._getThisWeekDayOffCount(row, firstDateOfThisWeek) === 0).forEach((row) => {\r\n          planJobQueue.unshift({ row, firstDateOfThisWeek });\r\n        });\r\n    rowsNeedToPlan\r\n      .filter((row) => !this._isNextWeekDayOffCountGreaterThan2(row, firstDateOfThisWeek)\r\n        && this._getThisWeekDayOffCount(row, firstDateOfThisWeek) === 1).forEach((row) => {\r\n          planJobQueue.unshift({ row, firstDateOfThisWeek });\r\n        });\r\n    rowsNeedToPlan\r\n      .filter((row) => !this._isNextWeekDayOffCountGreaterThan2(row, firstDateOfThisWeek)\r\n        && this._getThisWeekDayOffCount(row, firstDateOfThisWeek) === 0).forEach((row) => {\r\n          planJobQueue.unshift({ row, firstDateOfThisWeek });\r\n        });\r\n  }\r\n\r\n  _isThisWeekDayOffCountGreaterEqualThan2(row, firstDateOfThisWeek) {\r\n    return row.slice(\r\n      this._dateToColIndex(firstDateOfThisWeek), this._dateToColIndex(firstDateOfThisWeek + 7),\r\n    ).filter((shift) => shift === ShiftType.DayOff).length >= 2;\r\n  }\r\n\r\n  _processPlanJob(dayOffTable, monthModel, planJob) {\r\n    if (planJob.row[this.cols - 1] === Role.MG) {\r\n      for (let date = planJob.firstDateOfThisWeek; date < planJob.firstDateOfThisWeek + 7; date += 1) {\r\n        if (dayOffTable[this.rows - 1][this._dateToColIndex(date)] < 2) {\r\n          this._setTableCellShift(dayOffTable, planJob.row, date, ShiftType.DayOff);\r\n        }\r\n      }\r\n    } else {\r\n      this._planRowDayOff(dayOffTable, monthModel, planJob.row, planJob.firstDateOfThisWeek);\r\n    }\r\n  }\r\n\r\n  _planRowDayOff(dayOffTable, monthModel, row, firstDateOfThisWeek) {\r\n    const weekShifts = this._getThisWeekShifts(row, firstDateOfThisWeek);\r\n    const dayOffCount = weekShifts.filter((shift) => shift === ShiftType.DayOff).length;\r\n    if (dayOffCount === 1) {\r\n      this._signTheOtherDayOffThisWeekWhenThisWeekIsSignOneDayOffAlready(\r\n        dayOffTable, firstDateOfThisWeek, weekShifts, row,\r\n      );\r\n    } else if (dayOffCount === 0) {\r\n      const lastWeekLastDayOffDate = this._getLastWeekLastDayOffDate(row, firstDateOfThisWeek);\r\n      let candidateDates = [];\r\n      let secCandidateDates = [];\r\n      if (monthModel.getDay(lastWeekLastDayOffDate) === Day[7]) {\r\n        candidateDates = [firstDateOfThisWeek + 2, firstDateOfThisWeek + 3, firstDateOfThisWeek + 4];\r\n        secCandidateDates = [firstDateOfThisWeek];\r\n      } else if (monthModel.getDay(lastWeekLastDayOffDate) === Day[6]) {\r\n        candidateDates = [firstDateOfThisWeek + 1, firstDateOfThisWeek + 2, firstDateOfThisWeek + 3];\r\n      } else if (monthModel.getDay(lastWeekLastDayOffDate) === Day[5]) {\r\n        candidateDates = [firstDateOfThisWeek, firstDateOfThisWeek + 1, firstDateOfThisWeek + 2];\r\n      } else {\r\n        candidateDates = [firstDateOfThisWeek, firstDateOfThisWeek + 1];\r\n      }\r\n      const dayOffDate = this._getLeastDayOffCountDate(dayOffTable, candidateDates, secCandidateDates);\r\n      this._setTableCellShift(dayOffTable, row, dayOffDate, ShiftType.DayOff);\r\n\r\n      this._signTheOtherDayOffThisWeekWhenThisWeekIsSignOneDayOffAlready(\r\n        dayOffTable, firstDateOfThisWeek, this._getThisWeekShifts(row, firstDateOfThisWeek), row,\r\n      );\r\n    }\r\n  }\r\n\r\n  _getThisWeekShifts(row, firstDateOfThisWeek) {\r\n    return row.slice(\r\n      this._dateToColIndex(firstDateOfThisWeek), this._dateToColIndex(firstDateOfThisWeek + 7),\r\n    );\r\n  }\r\n\r\n  _signTheOtherDayOffThisWeekWhenThisWeekIsSignOneDayOffAlready(\r\n    dayOffTable, firstDateOfThisWeek, weekShifts, row,\r\n  ) {\r\n    const thisWeekDayOffDate = firstDateOfThisWeek + weekShifts.indexOf(ShiftType.DayOff);\r\n    const lastWeekLastDayOffDate = this._getLastWeekLastDayOffDate(row, firstDateOfThisWeek);\r\n    const beforeSeq = thisWeekDayOffDate - lastWeekLastDayOffDate - 1;\r\n    const nextWeekFirstDayOff = this._getNextWeekFirstDayOffDate(row, firstDateOfThisWeek);\r\n    let dayOffDate;\r\n    if (this._isNextWeekDayOffCountGreaterThan2(row, firstDateOfThisWeek)) {\r\n      const afterSeq = nextWeekFirstDayOff - lastWeekLastDayOffDate - 1;\r\n      if (beforeSeq >= afterSeq) {\r\n        if (beforeSeq <= MaxShiftSeq) dayOffDate = thisWeekDayOffDate - 1;\r\n        else if (beforeSeq % 2 === 0) {\r\n          dayOffDate = this._getLeastDayOffCountDate(\r\n            dayOffTable,\r\n            [thisWeekDayOffDate - (beforeSeq / 2), thisWeekDayOffDate - (beforeSeq / 2 + 1)],\r\n            [thisWeekDayOffDate - 1],\r\n          );\r\n        } else {\r\n          dayOffDate = thisWeekDayOffDate - ((beforeSeq / 2) + (beforeSeq % 2));\r\n        }\r\n      } else if (afterSeq <= MaxShiftSeq) dayOffDate = thisWeekDayOffDate + 1;\r\n      else if (afterSeq % 2 === 0) {\r\n        dayOffDate = this._getLeastDayOffCountDate(\r\n          dayOffTable,\r\n          [thisWeekDayOffDate + (afterSeq / 2), thisWeekDayOffDate + (afterSeq / 2 + 1)],\r\n          [thisWeekDayOffDate + 1],\r\n        );\r\n      } else {\r\n        dayOffDate = thisWeekDayOffDate + ((afterSeq / 2) + (afterSeq % 2));\r\n      }\r\n    } else {\r\n      const thisWeakDayOffDay = this.monthModel.getDay(thisWeekDayOffDate);\r\n      let candidateDates = [];\r\n      let secCandidateDates = [];\r\n      if (thisWeakDayOffDay === Day[1]) {\r\n        candidateDates = [thisWeekDayOffDate + 3, thisWeekDayOffDate + 4];\r\n        if (nextWeekFirstDayOff === undefined || this.monthModel.getDay(nextWeekFirstDayOff) !== Day[1]) {\r\n          candidateDates.push(thisWeekDayOffDate + 5);\r\n        }\r\n        if (nextWeekFirstDayOff === undefined || this.monthModel.getDay(nextWeekFirstDayOff) !== Day[2]) {\r\n          secCandidateDates = [thisWeekDayOffDate + 6];\r\n        }\r\n        secCandidateDates.push(thisWeekDayOffDate + 1);\r\n      } else if (thisWeakDayOffDay === Day[2]) {\r\n        if (beforeSeq > MaxShiftSeq) {\r\n          candidateDates = [thisWeekDayOffDate - 1];\r\n        } else {\r\n          candidateDates = [thisWeekDayOffDate + 3];\r\n          if (nextWeekFirstDayOff === undefined) {\r\n            candidateDates.push(thisWeekDayOffDate + 4, thisWeekDayOffDate + 5);\r\n          } else {\r\n            if (this.monthModel.getDay(nextWeekFirstDayOff) !== Day[1]) candidateDates.push(thisWeekDayOffDate + 4);\r\n            if (this.monthModel.getDay(nextWeekFirstDayOff) !== Day[2]) candidateDates.push(thisWeekDayOffDate + 5);\r\n          }\r\n          secCandidateDates = [thisWeekDayOffDate + 1];\r\n          if (beforeSeq !== 1) secCandidateDates.push(thisWeekDayOffDate - 1);\r\n        }\r\n      } else if (thisWeakDayOffDay === Day[3]) {\r\n        if (beforeSeq > MaxShiftSeq) {\r\n          candidateDates = [thisWeekDayOffDate - 1];\r\n        } else {\r\n          if (nextWeekFirstDayOff === undefined) {\r\n            candidateDates.push(thisWeekDayOffDate + 3, thisWeekDayOffDate + 4);\r\n          } else {\r\n            if (this.monthModel.getDay(nextWeekFirstDayOff) !== Day[1]) candidateDates.push(thisWeekDayOffDate + 3);\r\n            if (this.monthModel.getDay(nextWeekFirstDayOff) !== Day[2]) candidateDates.push(thisWeekDayOffDate + 4);\r\n          }\r\n          secCandidateDates = [thisWeekDayOffDate + 1];\r\n        }\r\n      } else if (thisWeakDayOffDay === Day[4]) {\r\n        if (beforeSeq > MaxShiftSeq) {\r\n          candidateDates = [thisWeekDayOffDate - 3];\r\n        } else if (nextWeekFirstDayOff === undefined\r\n          || (this.monthModel.getDay(nextWeekFirstDayOff) !== Day[1]\r\n            && this.monthModel.getDay(nextWeekFirstDayOff) !== Day[2])) {\r\n          candidateDates = [thisWeekDayOffDate + 3];\r\n          secCandidateDates = [thisWeekDayOffDate - 1, thisWeekDayOffDate + 1];\r\n        } else {\r\n          candidateDates = [thisWeekDayOffDate - 1, thisWeekDayOffDate + 1];\r\n        }\r\n      } else if (thisWeakDayOffDay === Day[5]) {\r\n        const lastWeekLastDayOffDay = this.monthModel.getDay(lastWeekLastDayOffDate);\r\n        if (lastWeekLastDayOffDay === Day[7]) {\r\n          candidateDates = [thisWeekDayOffDate - 1, thisWeekDayOffDate - 4];\r\n        } else if (lastWeekLastDayOffDay === Day[6]) {\r\n          candidateDates = [thisWeekDayOffDate - 3];\r\n          secCandidateDates = [thisWeekDayOffDate - 1];\r\n        } else if (lastWeekLastDayOffDay === Day[5]) {\r\n          candidateDates = [thisWeekDayOffDate - 3, thisWeekDayOffDate - 4];\r\n        } else {\r\n          candidateDates = [thisWeekDayOffDate - 4];\r\n          secCandidateDates = [thisWeekDayOffDate - 3];\r\n        }\r\n      } else if (thisWeakDayOffDay === Day[6]) {\r\n        const lastWeekLastDayOffDay = this.monthModel.getDay(lastWeekLastDayOffDate);\r\n        if (lastWeekLastDayOffDay === Day[7]) {\r\n          candidateDates = [thisWeekDayOffDate - 3];\r\n          secCandidateDates = [thisWeekDayOffDate - 1, thisWeekDayOffDate - 5];\r\n        } else if (lastWeekLastDayOffDay === Day[6]) {\r\n          candidateDates = [thisWeekDayOffDate - 3, thisWeekDayOffDate - 4];\r\n        } else {\r\n          candidateDates = [thisWeekDayOffDate - 3, thisWeekDayOffDate - 4, thisWeekDayOffDate - 5];\r\n        }\r\n      } else {\r\n        const lastWeekLastDayOffDay = this.monthModel.getDay(lastWeekLastDayOffDate);\r\n        if (lastWeekLastDayOffDay === Day[7]) {\r\n          candidateDates = [thisWeekDayOffDate - 3, thisWeekDayOffDate - 4];\r\n          secCandidateDates = [thisWeekDayOffDate - 1, thisWeekDayOffDate - 6];\r\n        } else if (lastWeekLastDayOffDay === Day[6]) {\r\n          candidateDates = [thisWeekDayOffDate - 3, thisWeekDayOffDate - 4, thisWeekDayOffDate - 5];\r\n        } else if (lastWeekLastDayOffDay === Day[5]) {\r\n          candidateDates = [thisWeekDayOffDate - 4, thisWeekDayOffDate - 5];\r\n          secCandidateDates = [thisWeekDayOffDate - 3, thisWeekDayOffDate - 6];\r\n        } else {\r\n          candidateDates = [thisWeekDayOffDate - 5];\r\n          secCandidateDates = [thisWeekDayOffDate - 4, thisWeekDayOffDate - 6];\r\n        }\r\n      }\r\n      dayOffDate = this._getLeastDayOffCountDate(dayOffTable, candidateDates, secCandidateDates);\r\n      console.assert(dayOffTable[this.rows - 1][this._dateToColIndex(dayOffDate)] <= 1);\r\n    }\r\n    this._setTableCellShift(dayOffTable, row, dayOffDate, ShiftType.DayOff);\r\n  }\r\n\r\n  _getThisWeekDayOffCount(row, firstDateOfThisWeek) {\r\n    return row.slice(\r\n      this._dateToColIndex(firstDateOfThisWeek), this._dateToColIndex(firstDateOfThisWeek + 7),\r\n    ).filter((shift) => shift === ShiftType.DayOff).length;\r\n  }\r\n\r\n  _isNextWeekDayOffCountGreaterThan2 = (row, firstDateOfThisWeek) => row.slice(\r\n    firstDateOfThisWeek + 7, firstDateOfThisWeek + 14,\r\n  ).filter(\r\n    (shift) => shift === ShiftType.DayOff,\r\n  ).length >= 2\r\n\r\n  _getNextWeekFirstDayOffDate(row, firstDateOfThisWeek) {\r\n    return row.slice(\r\n      this._dateToColIndex(firstDateOfThisWeek + 7), this._dateToColIndex(firstDateOfThisWeek + 14),\r\n    ).find((shift) => shift === ShiftType.DayOff);\r\n  }\r\n\r\n  _getLastWeekLastDayOffDate(row, firstDateOfThisWeek) {\r\n    return firstDateOfThisWeek - 1\r\n      - row.slice(\r\n        this._dateToColIndex(firstDateOfThisWeek - 7), this._dateToColIndex(firstDateOfThisWeek),\r\n      ).reverse().indexOf(ShiftType.DayOff);\r\n  }\r\n\r\n  _setTableCellShift(dayOffTable, row, date, shiftType) {\r\n    const colIndex = this._dateToColIndex(date);\r\n    if (row[colIndex] === shiftType) return;\r\n\r\n    if (row[colIndex] !== ShiftType.DayOff && shiftType === ShiftType.DayOff) {\r\n      dayOffTable[this.rows - 1][colIndex] += 1;\r\n    } else if (row[colIndex] === ShiftType.DayOff && shiftType !== ShiftType.DayOff) {\r\n      dayOffTable[this.rows - 1][colIndex] -= 1;\r\n    }\r\n    row[colIndex] = shiftType;\r\n  }\r\n\r\n  _getLeastDayOffCountDate(dayOffTable, candidateDates, secCandidateDates) {\r\n    if (candidateDates\r\n      && candidateDates.length === 1\r\n      && dayOffTable[this.rows - 1][this._dateToColIndex(candidateDates[0]) < 2]) return candidateDates[0];\r\n\r\n    let minCount = Number.MAX_VALUE;\r\n    let result = [];\r\n    candidateDates.forEach((date) => {\r\n      if (dayOffTable[this.rows - 1][this._dateToColIndex(date)] < minCount) {\r\n        result = [date];\r\n        minCount = dayOffTable[this.rows - 1][this._dateToColIndex(date)];\r\n      } else if (dayOffTable[this.rows - 1][this._dateToColIndex(date)] === minCount) {\r\n        result.push(date);\r\n      }\r\n    });\r\n\r\n    if (minCount >= 2) {\r\n      secCandidateDates.forEach((date) => {\r\n        if (dayOffTable[this.rows - 1][this._dateToColIndex(date)] < minCount) {\r\n          result = [date];\r\n          minCount = dayOffTable[this.rows - 1][this._dateToColIndex(date)];\r\n        } else if (dayOffTable[this.rows - 1][this._dateToColIndex(date)] === minCount) {\r\n          result.push(date);\r\n        }\r\n      });\r\n    }\r\n    console.assert(minCount <= 2);\r\n    return result[Math.floor(Math.random() * result.length)];\r\n  }\r\n}\r\n","import { Day, ShiftType } from './constants';\r\n\r\nexport default class MonthModel {\r\n  constructor({ year, month, holidayOffDates = [] }) {\r\n    this.dateObj = new Date(year, month);\r\n    this.beginDay = this.dateObj.getDay();\r\n    this.days = new Date(year, month + 1, 0).getDate();\r\n    this.lastMonthDays = new Date(year, month, 0).getDate();\r\n    this.holidayOffDates = holidayOffDates;\r\n    this.nextMonthFirstWeekDays = this.getNextMonthFirstWeekDays();\r\n    this.lastMonthLastWeekDays = this.getLastMonthLastWeekDays();\r\n  }\r\n\r\n  getShifts(date) {\r\n    if (this.isWeekend(date) || this.holidayOffDates.indexOf(date) !== -1) {\r\n      return [ShiftType.FullDay, ShiftType.NightShiftOvertime, ShiftType.MoringShift, ShiftType.NightShift];\r\n    }\r\n    return [ShiftType.NightShiftOvertime, ShiftType.MoringShift, ShiftType.MoringShift, ShiftType.NightShift];\r\n  }\r\n\r\n  isWeekend(date) {\r\n    const day = (this.beginDay + date - 1) % 7;\r\n    return day === 0 || day === 6;\r\n  }\r\n\r\n  getDay(date) {\r\n    const day = (this.beginDay + date - 1) % 7;\r\n    return Day[day];\r\n  }\r\n\r\n  getNextMonthFirstWeekDays() {\r\n    return 7 - ((this.beginDay + this.days - 1) % 7);\r\n  }\r\n\r\n  getLastMonthLastWeekDays() {\r\n    return this.beginDay - 1;\r\n  }\r\n}\r\n","import React, { PureComponent } from 'react';\r\nimport './employee.scss';\r\n\r\nexport default class Employee extends PureComponent {\r\n  render() {\r\n    const {\r\n      employeeModels, roleOptions, handleAddEmployeeBtnClick, handleEmployeeChange, handleDeleteEmployeeBtnClick,\r\n    } = this.props;\r\n    const roleSelectOptions = roleOptions.map((role) => <option key={role}>{role}</option>);\r\n    const empList = employeeModels.map((emp) => (\r\n      <div className=\"employee-flex-item\" key={emp.uniqueId}>\r\n        <input value={emp.name} name=\"name\" data-unique-id={emp.uniqueId} onChange={handleEmployeeChange} />\r\n        <select value={emp.role} name=\"role\" data-unique-id={emp.uniqueId} onChange={handleEmployeeChange}>\r\n          {roleSelectOptions}\r\n        </select>\r\n        <button type=\"button\" data-unique-id={emp.uniqueId} onClick={handleDeleteEmployeeBtnClick}>刪除</button>\r\n      </div>\r\n    ));\r\n\r\n    return (\r\n      <div className=\"employee-container flex-container-column\">\r\n        <h3 className=\"flex-item-origin-size\">員工資料</h3>\r\n        <button\r\n          className=\"flex-item-origin-size add-employee-btn\"\r\n          type=\"button\"\r\n          onClick={handleAddEmployeeBtnClick}\r\n        >\r\n          新增員工資料\r\n        </button>\r\n        <div className=\"employee-flex-container flex-item-expand-1\">\r\n          {empList}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\n\r\nexport default class YearMonth extends React.PureComponent {\r\n  render() {\r\n    const {\r\n      yearOptions, selectedYear, selectedMonth, handleYearSelectChange, handleMonthSelectChange,\r\n    } = this.props;\r\n\r\n    const monthOptions = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11];\r\n\r\n    const yearSelectOptions = yearOptions.map(\r\n      (year) => <option key={year} value={year}>{year}</option>,\r\n    );\r\n    const monthSelectOptions = monthOptions.map(\r\n      (month) => <option key={month} value={month}>{month + 1}</option>,\r\n    );\r\n\r\n    return (\r\n      <div>\r\n        <h3>計畫排班月份</h3>\r\n        <select value={selectedYear} onChange={handleYearSelectChange}>\r\n          {yearSelectOptions}\r\n        </select>\r\n        <select value={selectedMonth} onChange={handleMonthSelectChange}>\r\n          {monthSelectOptions}\r\n        </select>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","/* eslint-disable jsx-a11y/control-has-associated-label */\r\nimport React, { PureComponent } from 'react';\r\n\r\nexport default class DateRow extends PureComponent {\r\n  render() {\r\n    const { monthData } = this.props;\r\n    const dateHeaders = [];\r\n    dateHeaders.push(<th key=\"pre padding\" />);\r\n    const firstDateOfTable = 1 + monthData.lastMonthDays - monthData.lastMonthLastWeekDays;\r\n    for (let date = firstDateOfTable; date <= monthData.lastMonthDays; date += 1) {\r\n      dateHeaders.push(<th key={`last${date}`} className=\"last-month\">{date}</th>);\r\n    }\r\n    for (let date = 1; date <= monthData.days; date += 1) {\r\n      dateHeaders.push(<th key={`this${date}`} className=\"this-month\">{date}</th>);\r\n    }\r\n    for (let date = 1; date <= monthData.nextMonthFirstWeekDays; date += 1) {\r\n      dateHeaders.push(<th key={`next${date}`} className=\"next-month\">{date}</th>);\r\n    }\r\n    return (\r\n      <tr className=\"date-row\">\r\n        {dateHeaders}\r\n      </tr>\r\n    );\r\n  }\r\n}\r\n","/* eslint-disable jsx-a11y/control-has-associated-label */\r\nimport React, { PureComponent } from 'react';\r\n\r\nexport default class DayRow extends PureComponent {\r\n  render() {\r\n    const { monthData } = this.props;\r\n    const dayHeaders = [];\r\n    dayHeaders.push(<th key=\"pre padding\" />);\r\n    const firstDateOfTable = 1 + monthData.lastMonthDays - monthData.lastMonthLastWeekDays;\r\n    for (let date = firstDateOfTable; date <= monthData.lastMonthDays; date += 1) {\r\n      const day = monthData.getDay(date - monthData.lastMonthDays);\r\n      dayHeaders.push(<th key={`last${date} ${day}`} className=\"last-month\">{day}</th>);\r\n    }\r\n    for (let date = 1; date <= monthData.days; date += 1) {\r\n      const day = monthData.getDay(date);\r\n      dayHeaders.push(<th key={`this${date} ${day}`} className=\"this-month\">{day}</th>);\r\n    }\r\n    for (let date = 1; date <= monthData.nextMonthFirstWeekDays; date += 1) {\r\n      const day = monthData.getDay(monthData.days + date);\r\n      dayHeaders.push(<th key={`next${date} ${day}`} className=\"next-month\">{day}</th>);\r\n    }\r\n    return (\r\n      <tr className=\"day-row\">\r\n        {dayHeaders}\r\n      </tr>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\nimport DateRow from './date-row';\r\nimport DayRow from './day-row';\r\nimport './day-off-table.scss';\r\nimport { ShiftType } from '../../shift-plan';\r\n\r\nexport default function PlanDayOffTable(props) {\r\n  const {\r\n    monthModel, employeeModels, dayOffTable, dayOffTableCellClick,\r\n  } = props;\r\n  const rowLength = 1 + monthModel.lastMonthLastWeekDays + monthModel.days\r\n    + monthModel.nextMonthFirstWeekDays + 1; // first +1 for name column, last +1 for role column\r\n  const thisMonthText = monthModel.dateObj.toLocaleString('default', { month: 'long' });\r\n  const thisMonth = new Date(monthModel.dateObj);\r\n  thisMonth.setMonth(monthModel.dateObj.getMonth() - 1);\r\n  const lastMonthText = thisMonth.toLocaleString('default', { month: 'long' });\r\n\r\n  const bodyRows = employeeModels.map((emp, rowIndex) => {\r\n    const clickableCells = [];\r\n    for (let col = 1; col <= rowLength - 2; col += 1) {\r\n      const className = dayOffTable[rowIndex][col] === ShiftType.DayOff ? 'buttonCell orig-day-off' : 'buttonCell';\r\n      clickableCells.push(\r\n        <td key={col} className={className}>\r\n          <button type=\"button\" onClick={() => { dayOffTableCellClick(rowIndex, col); }}>\r\n            {dayOffTable[rowIndex][col]}\r\n          </button>\r\n        </td>,\r\n      );\r\n    }\r\n    return (\r\n      <tr key={emp.uniqueId}>\r\n        <td key=\"name\">{emp.name}</td>\r\n        {clickableCells}\r\n        <td key=\"role\">\r\n          {emp.role}\r\n        </td>\r\n      </tr>\r\n    );\r\n  });\r\n  return (\r\n    <table className=\"roster-table\">\r\n      <thead>\r\n        <tr>\r\n          <th colSpan={rowLength}>\r\n            {`${thisMonthText}排休`}\r\n          </th>\r\n        </tr>\r\n        <DateRow {...{ monthData: monthModel }} />\r\n        <DayRow {...{ monthData: monthModel }} />\r\n      </thead>\r\n      <tbody>{bodyRows}</tbody>\r\n      <tfoot>\r\n        <tr><td colSpan={rowLength}>{`請填上${lastMonthText}最後一周的休假，以及${thisMonthText}的劃休`}</td></tr>\r\n      </tfoot>\r\n    </table>\r\n  );\r\n}\r\n","import React, { PureComponent } from 'react';\r\nimport DateRow from './date-row';\r\nimport DayRow from './day-row';\r\nimport './day-off-table.scss';\r\nimport { ShiftType } from '../../shift-plan';\r\n\r\nexport default class AutoPlanDayOffTable extends PureComponent {\r\n  render() {\r\n    const {\r\n      monthModel, employeeModels, origDayOffTable, autoDayOffTable,\r\n    } = this.props;\r\n    if (!autoDayOffTable) return null;\r\n    const rowLength = 1 + monthModel.lastMonthLastWeekDays + monthModel.days\r\n      + monthModel.nextMonthFirstWeekDays + 1; // first +1 for name column, last +1 for role column\r\n    const thisMonthText = monthModel.dateObj.toLocaleString('default', { month: 'long' });\r\n    const thisMonth = new Date(monthModel.dateObj);\r\n    thisMonth.setMonth(monthModel.dateObj.getMonth() - 1);\r\n    const lastMonthText = thisMonth.toLocaleString('default', { month: 'long' });\r\n\r\n    const bodyRows = employeeModels.map((emp, rowIndex) => {\r\n      const shiftCells = [];\r\n      for (let col = 1; col <= rowLength - 2; col += 1) {\r\n        if (origDayOffTable[rowIndex][col] === ShiftType.DayOff) {\r\n          shiftCells.push(\r\n            <td key={col} className=\"table-data orig-day-off\">\r\n              {autoDayOffTable[rowIndex][col]}\r\n            </td>,\r\n          );\r\n        } else {\r\n          shiftCells.push(\r\n            <td key={col} className=\"table-data\">\r\n              {autoDayOffTable[rowIndex][col]}\r\n            </td>,\r\n          );\r\n        }\r\n      }\r\n      return (\r\n        <tr key={emp.uniqueId}>\r\n          <td key=\"name\">{emp.name}</td>\r\n          {shiftCells}\r\n          <td key=\"role\">\r\n            {emp.role}\r\n          </td>\r\n        </tr>\r\n      );\r\n    });\r\n\r\n    const countRow = [];\r\n    countRow.push(<td key=\"pre padding\" />);\r\n    for (let col = 1; col <= rowLength - 2; col += 1) {\r\n      if (autoDayOffTable[employeeModels.length][col] > 2) {\r\n        countRow.push(\r\n          <td key={col} className=\"error\">\r\n            {autoDayOffTable[employeeModels.length][col]}\r\n          </td>,\r\n        );\r\n      } else {\r\n        countRow.push(\r\n          <td key={col}>\r\n            {autoDayOffTable[employeeModels.length][col]}\r\n          </td>,\r\n        );\r\n      }\r\n    }\r\n    bodyRows.push(\r\n      <tr key={new Date().getTime()}>\r\n        {countRow}\r\n      </tr>,\r\n    );\r\n    return (\r\n      <table className=\"roster-table\">\r\n        <thead>\r\n          <tr>\r\n            <th colSpan={rowLength}>\r\n              {`${thisMonthText}排休`}\r\n            </th>\r\n          </tr>\r\n          <DateRow {...{ monthData: monthModel }} />\r\n          <DayRow {...{ monthData: monthModel }} />\r\n        </thead>\r\n        <tbody>{bodyRows}</tbody>\r\n        <tfoot>\r\n          <tr><td colSpan={rowLength}>{`請填上${lastMonthText}最後一周的休假，以及${thisMonthText}的劃休`}</td></tr>\r\n        </tfoot>\r\n      </table>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\nimport './app.scss';\r\nimport {\r\n  EmployeeModel, Role, MonthModel, ShiftPlan, ShiftType,\r\n} from '../../shift-plan/index';\r\nimport Employee from '../employee/employee';\r\nimport YearMonth from '../year-month/year-month';\r\nimport PlanDayOffTable from '../plan-day-off-table/plan-day-off-table';\r\nimport AutoPlanDayOffTable from '../plan-day-off-table/auto-plan-day-off-table';\r\n\r\nexport default class App extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    const date = new Date();\r\n    const nextMonth = (this.thisMonth + 1) % 12;\r\n    const thisYear = date.getFullYear();\r\n    const thisMonth = date.getMonth();\r\n    const selectedYear = nextMonth === 0 ? thisYear + 1 : thisYear;\r\n    const selectedMonth = (thisMonth + 1) % 12;\r\n    const monthModel = new MonthModel({ year: selectedYear, month: selectedMonth });\r\n    this.yearOptions = [thisYear, thisYear + 1];\r\n    this.roleOptions = Object.values(Role);\r\n    this.state = {\r\n      selectedYear,\r\n      selectedMonth,\r\n      monthModel,\r\n      employeeModels: [],\r\n      employeeIndexCounter: 0,\r\n      origDayOffTable: this.initialDayOffTable(monthModel, []),\r\n      autoDayOffTable: null,\r\n    };\r\n  }\r\n\r\n  initialDayOffTable = (monthModel, employeeModels, shouldShiftTypeAppend = false) => {\r\n    const rows = employeeModels.length + 1;\r\n    const cols = this.getDayOffTableCols(monthModel, shouldShiftTypeAppend);\r\n\r\n    const dayOffTable = Array.from(\r\n      Array(rows),\r\n      () => Array(cols).fill(''),\r\n    );\r\n\r\n    const daysCols = monthModel.lastMonthLastWeekDays + monthModel.days + monthModel.nextMonthFirstWeekDays;\r\n    for (let col = 1; col <= daysCols; col += 1) {\r\n      dayOffTable[rows - 1][col] = 0;\r\n    }\r\n\r\n    employeeModels.forEach((emp) => {\r\n      dayOffTable[emp.index][0] = emp.name;\r\n      dayOffTable[emp.index][cols - 1] = emp.role;\r\n    });\r\n\r\n    return dayOffTable;\r\n  }\r\n\r\n  getDayOffTableCols = (monthModel, shouldShiftTypeAppend = false) => (\r\n    1 + monthModel.lastMonthLastWeekDays\r\n    + monthModel.days\r\n    + monthModel.nextMonthFirstWeekDays + 1\r\n    + (shouldShiftTypeAppend ? Object.keys(ShiftType).length : 0));\r\n\r\n  addEmpToDayOffTable = (dayOffTable, employeeModel, monthModel, shouldShiftTypeAppend = false) => {\r\n    const newDayOffTable = [\r\n      ...dayOffTable.slice(0, dayOffTable.length - 1),\r\n      Array(this.getDayOffTableCols(monthModel, shouldShiftTypeAppend)).fill(''),\r\n      ...dayOffTable.slice(dayOffTable.length - 1),\r\n    ];\r\n    newDayOffTable[newDayOffTable.length - 2][0] = employeeModel.name;\r\n    return newDayOffTable;\r\n  }\r\n\r\n  editEmpToDayOffTable = (dayOffTable, empIndex, employeeModel) => {\r\n    const newDayOffTable = [...dayOffTable];\r\n    newDayOffTable[empIndex][0] = employeeModel.name;\r\n    newDayOffTable[empIndex][newDayOffTable[empIndex].length - 1] = employeeModel.role;\r\n    return newDayOffTable;\r\n  }\r\n\r\n  deleteEmpToDayOffTable = (dayOffTable, empIndex) => dayOffTable.filter(\r\n    (row, rowIndex) => rowIndex !== empIndex,\r\n  );\r\n\r\n  handleYearSelectChange = (e) => {\r\n    const selectedYear = e.target.value;\r\n    this.setState((state) => {\r\n      const monthModel = new MonthModel({ year: selectedYear, month: state.selectedMonth });\r\n      const origDayOffTable = this.initialDayOffTable(monthModel, state.employeeModels);\r\n      return {\r\n        selectedYear, monthModel, origDayOffTable, autoDayOffTable: null,\r\n      };\r\n    });\r\n  }\r\n\r\n  handleMonthSelectChange = (e) => {\r\n    const selectedMonth = e.target.value;\r\n    this.setState((state) => {\r\n      const monthModel = new MonthModel({ year: state.selectedYear, month: selectedMonth });\r\n      const origDayOffTable = this.initialDayOffTable(monthModel, state.employeeModels);\r\n      return {\r\n        selectedMonth, monthModel, origDayOffTable, autoDayOffTable: null,\r\n      };\r\n    });\r\n  }\r\n\r\n  handleAddEmployeeBtnClick = () => {\r\n    this.setState((state) => {\r\n      const {\r\n        employeeIndexCounter,\r\n        employeeModels,\r\n        origDayOffTable,\r\n        monthModel,\r\n      } = state;\r\n\r\n      const role = employeeModels.length === 0 ? Role.MG : Role.FT;\r\n      const newEmp = new EmployeeModel({\r\n        uniqueId: employeeIndexCounter,\r\n        index: employeeModels.length,\r\n        name: `姓名${employeeIndexCounter}`,\r\n        role,\r\n      });\r\n\r\n      const newDayOffTable = this.addEmpToDayOffTable(origDayOffTable, newEmp, monthModel);\r\n\r\n      return {\r\n        employeeModels: [...employeeModels, newEmp],\r\n        employeeIndexCounter: employeeIndexCounter + 1,\r\n        origDayOffTable: newDayOffTable,\r\n        autoDayOffTable: null,\r\n      };\r\n    });\r\n  }\r\n\r\n  handleEmployeeChange = (e) => {\r\n    const { name, value } = e.target;\r\n    const uniqueId = Number(e.target.dataset.uniqueId);\r\n    this.setState((state) => {\r\n      const {\r\n        employeeModels,\r\n        origDayOffTable,\r\n      } = state;\r\n\r\n      const newEmployeeModels = [...employeeModels];\r\n      const editEmpIndex = newEmployeeModels.findIndex((emp) => emp.uniqueId === uniqueId);\r\n      newEmployeeModels[editEmpIndex][name] = value;\r\n      const newDayOffTable = this.editEmpToDayOffTable(origDayOffTable, editEmpIndex, newEmployeeModels[editEmpIndex]);\r\n      return { employeeModels: newEmployeeModels, origDayOffTable: newDayOffTable, autoDayOffTable: null };\r\n    });\r\n  }\r\n\r\n  handleDeleteEmployeeBtnClick = (e) => {\r\n    const uniqueId = Number(e.target.dataset.uniqueId);\r\n    this.setState((state) => {\r\n      const {\r\n        employeeModels,\r\n        origDayOffTable,\r\n      } = state;\r\n      const newEmployeeModels = employeeModels.filter((emp) => emp.uniqueId !== uniqueId);\r\n      const deleteEmpIndex = employeeModels.findIndex((emp) => emp.uniqueId === uniqueId);\r\n      const newDayOffTable = this.deleteEmpToDayOffTable(origDayOffTable, deleteEmpIndex);\r\n      return { employeeModels: newEmployeeModels, origDayOffTable: newDayOffTable, autoDayOffTable: null };\r\n    });\r\n  }\r\n\r\n  dayOffTableCellClick = (rowIndex, colIndex) => {\r\n    this.setState((state) => {\r\n      const origDayOffTable = [...state.origDayOffTable];\r\n      origDayOffTable[rowIndex][colIndex] = origDayOffTable[rowIndex][colIndex] === ShiftType.DayOff ? '' : ShiftType.DayOff;\r\n      return { origDayOffTable, autoDayOffTable: null };\r\n    });\r\n  }\r\n\r\n  handleGoToStep3Click = () => {\r\n    this.setState((state) => {\r\n      const {\r\n        monthModel,\r\n        employeeModels,\r\n        origDayOffTable,\r\n      } = state;\r\n      const autoDayOffTable = this.getAutoDayOffTable(monthModel, employeeModels, origDayOffTable);\r\n      return { autoDayOffTable };\r\n    });\r\n  }\r\n\r\n  getAutoDayOffTable = (monthModel, employeeModels, origDayOffTable) => {\r\n    const autoDayOffTable = this.initialDayOffTable(monthModel, employeeModels, true);\r\n    origDayOffTable.forEach((row, rowIndex) => {\r\n      row.forEach((col, colIndex) => {\r\n        if (origDayOffTable[rowIndex][colIndex] === ShiftType.DayOff) {\r\n          autoDayOffTable[rowIndex][colIndex] = ShiftType.DayOff;\r\n        }\r\n      });\r\n    });\r\n\r\n    const shiftPlan = new ShiftPlan(monthModel, origDayOffTable, autoDayOffTable);\r\n    return shiftPlan.getAutoDayOffTable();\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      yearOptions, roleOptions,\r\n      handleAddEmployeeBtnClick, handleEmployeeChange, handleDeleteEmployeeBtnClick,\r\n      handleYearSelectChange, handleMonthSelectChange, dayOffTableCellClick,\r\n    } = this;\r\n    const {\r\n      selectedYear, selectedMonth, employeeModels, monthModel, origDayOffTable, autoDayOffTable,\r\n    } = this.state;\r\n    const employeeProps = {\r\n      employeeModels, roleOptions, handleAddEmployeeBtnClick, handleEmployeeChange, handleDeleteEmployeeBtnClick,\r\n    };\r\n\r\n    return (\r\n      <div className=\"app\">\r\n        <div id=\"step1\" className=\"step\">\r\n          <h2 className=\"step-header\">1. 資料填寫</h2>\r\n          <div className=\"step-body flex-container-column\">\r\n            <div className=\"flex-item-origin-size\">\r\n              <YearMonth\r\n                {...{\r\n                  yearOptions, selectedYear, selectedMonth, handleYearSelectChange, handleMonthSelectChange,\r\n                }}\r\n              />\r\n            </div>\r\n            <div className=\"flex-item-expand-1\">\r\n              <Employee {...employeeProps} />\r\n            </div>\r\n          </div>\r\n          <div className=\"step-footer\">\r\n            <a href=\"#step2\" className=\"next-step\">下一步</a>\r\n          </div>\r\n        </div>\r\n        <div id=\"step2\" className=\"step\">\r\n          <h2 className=\"step-header\">2. 畫休</h2>\r\n          <div className=\"step-body\">\r\n            <PlanDayOffTable {...{\r\n              monthModel, employeeModels, dayOffTable: origDayOffTable, dayOffTableCellClick,\r\n            }}\r\n            />\r\n          </div>\r\n          <div className=\"step-footer float-right\">\r\n            <a href=\"#step3\" className=\"next-step\" onClick={this.handleGoToStep3Click}>下一步</a>\r\n            <a href=\"#step1\" className=\"last-step\">上一步</a>\r\n          </div>\r\n        </div>\r\n        <div id=\"step3\" className=\"step\">\r\n          <h2 className=\"step-header\">3. 自動排休</h2>\r\n          <div className=\"step-body\">\r\n            <AutoPlanDayOffTable {...{\r\n              monthModel, employeeModels, origDayOffTable, autoDayOffTable,\r\n            }}\r\n            />\r\n          </div>\r\n          <div className=\"step-footer float-right\">\r\n            <a href=\"#step2\" className=\"last-step\">上一步</a>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost'\r\n  // [::1] is the IPv6 localhost address.\r\n  || window.location.hostname === '[::1]'\r\n  // 127.0.0.1/8 is considered localhost for IPv4.\r\n  || window.location.hostname.match(\r\n    /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/,\r\n  ),\r\n);\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then((registration) => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all '\r\n                + 'tabs for this page are closed. See https://bit.ly/CRA-PWA.',\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch((error) => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then((response) => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404\r\n        || (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then((registration) => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.',\r\n      );\r\n    });\r\n}\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service '\r\n            + 'worker. To learn more, visit https://bit.ly/CRA-PWA',\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then((registration) => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './components/app/app';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}